<?php

namespace WellFollowedBundle\Entity;

/**
 * EventRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class EventRepository extends \Doctrine\ORM\EntityRepository
{
    public function findEvents($filter = null) {
        if (!is_null($filter)) {
            return $this->findBy($filter);
        }
        return $this->findAll();
    }

    public function createEvent(\StdClass $data) {
        $event = new Event();

        $event->setDescription($data->description);
        $event->setEndDate($data->endDate);
        $event->setName($data->name);
        $event->setStartDate($data->startDate);
        $event->setUser($data->user);

        $entityManager = $this->getEntityManager();

        $entityManager->persist($event);
        $entityManager->flush();

        return $event;
    }
}
